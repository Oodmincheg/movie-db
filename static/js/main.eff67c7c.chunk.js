(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},37:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(13),o=a.n(r),c=a(3),s=a(4),l=a(6),u=a(5),h=a(7),d=a(8),m=a(11),p=a(12),v=a(38),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){if(localStorage.getItem("watchlist")){var e=JSON.parse(localStorage.getItem("watchlist"));a.setState({watchlist:e}),a.setState({inWatchList:Boolean(a.props.id in e)})}else localStorage.setItem("watchlist","{}");window.addEventListener("beforeunload",a.moveToLocalStorage)},a.moveToLocalStorage=function(){var e=JSON.parse(localStorage.getItem("watchlist"));!a.state.inWatchList||a.props.id in e||(e[a.props.id]=a.props.title),!a.state.inWatchList&&a.props.id in e&&delete e[a.props.id],localStorage.setItem("watchlist",JSON.stringify(e))},a.componentWillUnmount=function(){a.moveToLocalStorage(),window.removeEventListener("beforeunload",a.componentCleanup)},a.state={inWatchList:!1},a.deleteFromWatchList=a.deleteFromWatchList.bind(Object(d.a)(Object(d.a)(a))),a.moveToLocalStorage=a.moveToLocalStorage.bind(Object(d.a)(Object(d.a)(a))),a.addToWatchList=a.addToWatchList.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"deleteFromWatchList",value:function(){this.setState({inWatchList:!1})}},{key:"addToWatchList",value:function(){this.setState({inWatchList:!0})}},{key:"render",value:function(){return this.state.inWatchList?i.a.createElement("button",{onClick:this.deleteFromWatchList},"Delete from watchlist"):i.a.createElement("button",{onClick:this.addToWatchList},"Add to watch list")}}]),t}(i.a.Component);function g(){var e=Object(m.a)(["\n  float: left;\n"]);return g=function(){return e},e}function b(){var e=Object(m.a)(["\n  width: 40%;\n  margin: 0 4% 20px 4%;\n  border: 2px solid #333;\n  border-radius: 4px;\n"]);return b=function(){return e},e}var j=p.a.div(b()),O=p.a.img(g()),E=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(j,{className:"movie-card"},i.a.createElement(O,{src:this.props.imgSrc,alt:this.props.title}),i.a.createElement(v.a,{to:"/movie/".concat(this.props.id)},i.a.createElement("h2",null,this.props.title)),i.a.createElement(f,{id:this.props.id,title:this.props.title}),i.a.createElement("p",null,this.props.allGenres.filter(function(t){return e.props.genres.includes(t.id)}).map(function(e){return e.name}).join(", ")))}}]),t}(i.a.Component),L=a(22),S=a.n(L);function y(){var e=Object(m.a)(["\n  margin: 0 auto;\n  max-width: 1200px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return y=function(){return e},e}function w(){var e=Object(m.a)(["\n  max-width: 1100px;\n  margin: 0 auto;\n  display: flex;\n  flex-wrap: wrap;\n"]);return w=function(){return e},e}var k=p.a.div(w()),D=p.a.header(y()),W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pages:2,movies:a.props.movies,searchString:"",allGenres:[],genresLoaded:!1},a.handleSearch=a.handleSearch.bind(Object(d.a)(Object(d.a)(a))),a.fetchMoreData=a.fetchMoreData.bind(Object(d.a)(Object(d.a)(a))),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"fetchMoreData",value:function(){var e=this,t="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=98135c4d3cc392347281f8d007876760&language=en-US&page="+this.state.pages;fetch(t).then(function(e){return e.json()}).then(function(t){return e.setState({movies:e.state.movies.concat(t.results),pages:e.state.pages+1})})}},{key:"handleSearch",value:function(e){var t=e.target;this.setState({searchString:t.value})}},{key:"componentDidMount",value:function(){var e=this;fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=98135c4d3cc392347281f8d007876760&language=en-US").then(function(e){return e.json()}).then(function(t){e.setState({genresLoaded:!0,allGenres:t.genres})},function(t){e.setState({genresLoaded:!0,error:t})})}},{key:"render",value:function(){var e=this;return this.state.genresLoaded?i.a.createElement("div",{className:"content"},i.a.createElement(D,null,i.a.createElement(v.a,{to:"/watchlist"},"Watch list"),i.a.createElement("h1",null,"Movies"),i.a.createElement("input",{type:"text",placeholder:"type title...",value:this.state.searchString,onChange:this.handleSearch})),i.a.createElement(S.a,{dataLength:this.state.movies.length,next:this.fetchMoreData,hasMore:!0},i.a.createElement(k,null,this.state.movies.filter(function(t){return t.title.toUpperCase().includes(e.state.searchString.toUpperCase())}).map(function(t){return i.a.createElement(E,{allGenres:e.state.allGenres,genres:t.genre_ids,id:t.id,key:t.id,title:t.title,imgSrc:"https://image.tmdb.org/t/p/w154/".concat(t.poster_path)})})))):i.a.createElement("h2",null,"Loading...")}}]),t}(i.a.Component),x=a(40),M=a(39),C=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isLoaded:!1,recomendations:[]},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="https://api.themoviedb.org/3/movie/".concat(this.props.id,"/recommendations?api_key=98135c4d3cc392347281f8d007876760&language=en-US&page=1");fetch(t).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,recomendations:t.results})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"render",value:function(){return this.state.isLoaded?i.a.createElement("section",null,i.a.createElement("h3",null,"Recomendations"),this.state.recomendations.map(function(e){return e.original_title}).join(", ")):i.a.createElement("h4",null,"Loading...")}}]),t}(i.a.Component);function _(){var e=Object(m.a)(["\n  display: flex;\n"]);return _=function(){return e},e}var I=p.a.div(_()),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={error:null,isLoaded:!1,movieDetails:{}},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="https://api.themoviedb.org/3/movie/".concat(this.props.movieId,"?api_key=98135c4d3cc392347281f8d007876760&language=en-US");fetch(t).then(function(e){return e.json()}).then(function(t){e.setState({isLoaded:!0,movieDetails:t})},function(t){e.setState({isLoaded:!0,error:t})})}},{key:"render",value:function(){return this.state.isLoaded?i.a.createElement("div",null,i.a.createElement("header",null,i.a.createElement("h1",null,this.state.movieDetails.title)),i.a.createElement(I,null,i.a.createElement("aside",null,i.a.createElement("img",{src:"https://image.tmdb.org/t/p/w300/".concat(this.state.movieDetails.poster_path),alt:"".concat(this.state.movieDetails.title," poster")})),i.a.createElement("content",null,i.a.createElement("section",null,i.a.createElement("h3",null,"Overview"),i.a.createElement("p",null,this.state.movieDetails.overview)),i.a.createElement("section",null,i.a.createElement("h3",null,"Genre"),i.a.createElement("p",null,this.state.movieDetails.genres.map(function(e){return e.name}).join(", "))),i.a.createElement(C,{id:this.state.movieDetails.id}),i.a.createElement(f,{id:this.state.movieDetails.id,title:this.state.movieDetails.title})))):i.a.createElement("h2",null,"Loading...")}}]),t}(i.a.Component),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={watchList:{}},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("watchlist"));this.setState({watchList:e}),console.log(this.state.watchList)}},{key:"render",value:function(){var e=this;return"{}"==JSON.stringify(this.state.watchList)?i.a.createElement("h2",null,"Watch list is empty"):i.a.createElement("ul",null,Object.keys(this.state.watchList).map(function(t){return i.a.createElement("li",{key:t},e.state.watchList[t]," ",i.a.createElement(f,{id:t,title:e.state.watchList.id})," ")}))}}]),t}(i.a.Component),J=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={moviesLoaded:!1,error:null,popularMovies:[]},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=98135c4d3cc392347281f8d007876760&language=en-US").then(function(e){return e.json()}).then(function(t){e.setState({moviesLoaded:!0,popularMovies:t.results})},function(t){e.setState({moviesLoaded:!0,error:t})})}},{key:"render",value:function(){var e=this;return this.state.moviesLoaded?i.a.createElement(x.a,null,i.a.createElement("div",null,i.a.createElement(M.a,{exact:!0,path:"/",render:function(){return i.a.createElement(W,{movies:e.state.popularMovies})}}),i.a.createElement(M.a,{exact:!0,path:"/movie/:id",render:function(e){return i.a.createElement(T,{movieId:e.match.params.id})}}),i.a.createElement(M.a,{exact:!0,path:"/watchlist",component:U}))):i.a.createElement("h2",null,"Loading...")}}]),t}(i.a.Component);o.a.render(i.a.createElement(J,null),document.getElementById("root"))}},[[25,2,1]]]);
//# sourceMappingURL=main.eff67c7c.chunk.js.map