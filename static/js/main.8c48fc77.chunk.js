(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(16),i=n.n(r),c=n(4),l=n(5),s=n(7),u=n(6),p=n(8),h=n(11),m=n(46),d=n(45),v=n(12),f="SET_SEARCH_STRING",g="ADD_ALL_GENRES",b="ADD_RECOMENDATIONS",O="ADD_MOVIE_DETAILS",E="ADD_POPULAR_MOVIES";function j(e){console.log("page in action creator",e);var t="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=98135c4d3cc392347281f8d007876760&language=en-US&page="+e;return console.log("url",t),function(e){return fetch(t).then(function(e){return e.json()}).then(function(t){var n;e((n=t.results,console.log("MOVIES in actionCreator",n),{type:E,payload:n}))},function(e){console.log(e)})}}function y(){return function(e){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=98135c4d3cc392347281f8d007876760&language=en-US").then(function(e){return e.json()}).then(function(t){e({type:g,payload:t})},function(e){console.log(e)})}}function S(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"/recommendations?api_key=98135c4d3cc392347281f8d007876760&language=en-US&page=1");return function(e){return fetch(t).then(function(e){return e.json()}).then(function(t){e({type:b,payload:t})},function(e){console.log(e)})}}function w(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"?api_key=98135c4d3cc392347281f8d007876760&language=en-US");return function(e){return fetch(t).then(function(e){return e.json()}).then(function(t){e({type:O,payload:t})},function(e){console.log(e)})}}var L=Object(v.c)({searchString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===f?t.payload:e},allGenres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===g?t.payload.genres:e},recomendations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===b?t.payload.results:e},movieDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===O?t.payload:e},popularMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===E?e.concat(t.payload):e},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return console.log("AAAAAA"),t.type===E?e+1:e}}),D=n(27),M=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d,_=Object(v.e)(L,M(Object(v.a)(D.a))),k=n(13),A=n(14),I=n(9),W=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){if(localStorage.getItem("watchlist")){var e=JSON.parse(localStorage.getItem("watchlist"));n.setState({watchlist:e}),n.setState({inWatchList:Boolean(n.props.id in e)})}else localStorage.setItem("watchlist","{}");window.addEventListener("beforeunload",n.moveToLocalStorage)},n.moveToLocalStorage=function(){var e=JSON.parse(localStorage.getItem("watchlist"));!n.state.inWatchList||n.props.id in e||(e[n.props.id]=n.props.title),!n.state.inWatchList&&n.props.id in e&&delete e[n.props.id],localStorage.setItem("watchlist",JSON.stringify(e))},n.componentWillUnmount=function(){n.moveToLocalStorage(),window.removeEventListener("beforeunload",n.componentCleanup)},n.state={inWatchList:!1},n.deleteFromWatchList=n.deleteFromWatchList.bind(Object(I.a)(Object(I.a)(n))),n.moveToLocalStorage=n.moveToLocalStorage.bind(Object(I.a)(Object(I.a)(n))),n.addToWatchList=n.addToWatchList.bind(Object(I.a)(Object(I.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"deleteFromWatchList",value:function(){this.setState({inWatchList:!1})}},{key:"addToWatchList",value:function(){this.setState({inWatchList:!0})}},{key:"render",value:function(){return this.state.inWatchList?o.a.createElement("button",{onClick:this.deleteFromWatchList},"Delete from watchlist"):o.a.createElement("button",{onClick:this.addToWatchList},"Add to watch list")}}]),t}(o.a.Component),x=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getAPIRecomendations()}},{key:"render",value:function(){return o.a.createElement("section",null,o.a.createElement("h3",null,"Recomendations"),this.props.recomendations.map(function(e){return e.original_title}).join(", "))}}]),t}(o.a.Component),P=Object(h.b)(function(e){return{recomendations:e.recomendations}},function(e,t){return{getAPIRecomendations:function(){console.log("here recomendations",t),e(S(t.id))}}})(x);function C(){var e=Object(k.a)(["\n  display: flex;\n"]);return C=function(){return e},e}var T=A.a.div(C()),N=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getMovieDetails()}},{key:"render",value:function(){return 0===Object.getOwnPropertyNames(this.props.movieDetails).length?o.a.createElement("h1",null,"Loading..."):o.a.createElement("div",null,o.a.createElement("header",null,o.a.createElement("h1",null,this.props.movieDetails.title)),o.a.createElement(T,null,o.a.createElement("aside",null,o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w300/".concat(this.props.movieDetails.poster_path),alt:"".concat(this.props.movieDetails.title," poster")})),o.a.createElement("content",null,o.a.createElement("section",null,o.a.createElement("h3",null,"Overview"),o.a.createElement("p",null,this.props.movieDetails.overview)),o.a.createElement("section",null,o.a.createElement("h3",null,"Genre"),o.a.createElement("p",null,this.props.movieDetails.genres.map(function(e){return e.name}).join(", "))),o.a.createElement(P,{id:this.props.movieDetails.id}),o.a.createElement(W,{id:this.props.movieDetails.id,title:this.props.movieDetails.title}))))}}]),t}(o.a.Component),G=Object(h.b)(function(e){return{movieDetails:e.movieDetails}},function(e,t){return{getMovieDetails:function(){e(w(t.id))}}})(N),R=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={watchList:{}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("watchlist"));this.setState({watchList:e}),console.log(this.state.watchList)}},{key:"render",value:function(){var e=this;return"{}"==JSON.stringify(this.state.watchList)?o.a.createElement("h2",null,"Watch list is empty"):o.a.createElement("ul",null,Object.keys(this.state.watchList).map(function(t){return o.a.createElement("li",{key:t},e.state.watchList[t]," ",o.a.createElement(W,{id:t,title:e.state.watchList.id})," ")}))}}]),t}(o.a.Component),U=n(44);function J(){var e=Object(k.a)(["\n  float: left;\n"]);return J=function(){return e},e}function F(){var e=Object(k.a)(["\n  width: 40%;\n  margin: 0 4% 20px 4%;\n  border: 2px solid #333;\n  border-radius: 4px;\n"]);return F=function(){return e},e}var V=A.a.div(F()),B=A.a.img(J()),X=function(e){var t=e.movie,n=t.id,a=t.title,r=t.genre_ids,i="https://image.tmdb.org/t/p/w154/".concat(e.movie.poster_path);return o.a.createElement(V,{className:"movie-card"},o.a.createElement(B,{src:i,alt:a}),o.a.createElement(U.a,{to:"/movie/".concat(n)},o.a.createElement("h2",null,a)),o.a.createElement(W,{id:n,title:a}),o.a.createElement("p",null,e.allGenres.filter(function(e){return r.includes(e.id)}).map(function(e){return e.name}).join(", ")))},H=n(30),q=n.n(H);function z(){var e=Object(k.a)(["\n  margin: 0 auto;\n  max-width: 1200px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return z=function(){return e},e}function K(){var e=Object(k.a)(["\n  max-width: 1100px;\n  margin: 0 auto;\n  display: flex;\n  flex-wrap: wrap;\n"]);return K=function(){return e},e}var Q=A.a.div(K()),Y=A.a.header(z()),Z=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).fetchMorePopularMovies=n.fetchMorePopularMovies.bind(Object(I.a)(Object(I.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"fetchMorePopularMovies",value:function(){this.props.getAPIPopularMovies(this.props.page)}},{key:"componentDidMount",value:function(){this.props.allGenres.length||(this.fetchMorePopularMovies(),this.props.getAPIGenres())}},{key:"render",value:function(){var e=this;return this.props.allGenres.length?o.a.createElement("div",{className:"content"},o.a.createElement(Y,null,o.a.createElement(U.a,{to:"/watchlist"},"Watch list"),o.a.createElement("h1",null,"Movies"),o.a.createElement("input",{type:"text",placeholder:"type title...",value:this.props.searchString,onChange:this.props.handleSearch})),o.a.createElement(q.a,{dataLength:this.props.popularMovies.length,next:this.fetchMorePopularMovies,hasMore:!0},o.a.createElement(Q,null,this.props.popularMovies.filter(function(t){return t.title.toUpperCase().includes(e.props.searchString.toUpperCase())}).map(function(t){return o.a.createElement(X,{key:t.id,allGenres:e.props.allGenres,movie:t})})))):o.a.createElement("h2",null,"Loading...")}}]),t}(o.a.Component),$=Object(h.b)(function(e){return console.log("movies!!!",e.popularMovies),{searchString:e.searchString,allGenres:e.allGenres,popularMovies:e.popularMovies,page:e.page}},function(e){return{handleSearch:function(t){var n;e((n=t.target.value,{type:f,payload:n}))},getAPIGenres:function(){e(y())},getAPIPopularMovies:function(t){e(j(t))}}})(Z),ee=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(m.a,null,o.a.createElement(h.a,{store:_},o.a.createElement("div",null,o.a.createElement(d.a,{exact:!0,path:"/",render:function(){return o.a.createElement($,null)}}),o.a.createElement(d.a,{exact:!0,path:"/movie/:id",render:function(e){return o.a.createElement(G,{id:e.match.params.id})}}),o.a.createElement(d.a,{exact:!0,path:"/watchlist",component:R}))))}}]),t}(o.a.Component);i.a.render(o.a.createElement(ee,null),document.getElementById("root"))}},[[33,2,1]]]);
//# sourceMappingURL=main.8c48fc77.chunk.js.map