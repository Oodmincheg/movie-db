(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},42:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(17),i=n.n(r),c=n(6),l=n(7),s=n(9),u=n(8),p=n(10),h=n(13),d=n(48),m=n(47),f=n(14),v="SET_SEARCH_STRING",g="ADD_ALL_GENRES",b="ADD_RECOMENDATIONS",O="ADD_MOVIE_DETAILS",E="ADD_POPULAR_MOVIES";function y(e){console.log("page in action creator",e);var t="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=98135c4d3cc392347281f8d007876760&language=en-US&page="+e;return console.log("url",t),function(e){return fetch(t).then(function(e){return e.json()}).then(function(t){var n;e((n=t.results,console.log("MOVIES in actionCreator",n),{type:E,payload:n}))},function(e){console.log(e)})}}function j(){return function(e){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=98135c4d3cc392347281f8d007876760&language=en-US").then(function(e){return e.json()}).then(function(t){e({type:g,payload:t})},function(e){console.log(e)})}}function w(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"/recommendations?api_key=98135c4d3cc392347281f8d007876760&language=en-US&page=1");return function(e){return fetch(t).then(function(e){return e.json()}).then(function(t){e({type:b,payload:t})},function(e){console.log(e)})}}function x(e){var t="https://api.themoviedb.org/3/movie/".concat(e,"?api_key=98135c4d3cc392347281f8d007876760&language=en-US");return function(e){return fetch(t).then(function(e){return e.json()}).then(function(t){e({type:O,payload:t})},function(e){console.log(e)})}}var S=Object(f.c)({searchString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===v?t.payload:e},allGenres:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===g?t.payload.genres:e},recomendations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===b?t.payload.results:e},movieDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===O?t.payload:e},popularMovies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===E?e.concat(t.payload):e},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return console.log("AAAAAA"),t.type===E?e+1:e}}),L=n(27),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,M=Object(f.e)(S,k(Object(f.a)(L.a))),D=n(4),I=n(5),_=n(11);function A(){var e=Object(D.a)(["\n  font-family: 'Inconsolata', monospace;\n  border: 2px solid lightblue;\n"]);return A=function(){return e},e}var P=I.a.button(A()),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){if(localStorage.getItem("watchlist")){var e=JSON.parse(localStorage.getItem("watchlist"));n.setState({watchlist:e}),n.setState({inWatchList:Boolean(n.props.id in e)})}else localStorage.setItem("watchlist","{}");window.addEventListener("beforeunload",n.moveToLocalStorage)},n.moveToLocalStorage=function(){var e=JSON.parse(localStorage.getItem("watchlist"));!n.state.inWatchList||n.props.id in e||(e[n.props.id]=n.props.title),!n.state.inWatchList&&n.props.id in e&&delete e[n.props.id],localStorage.setItem("watchlist",JSON.stringify(e))},n.componentWillUnmount=function(){n.moveToLocalStorage(),window.removeEventListener("beforeunload",n.componentCleanup)},n.state={inWatchList:!1},n.deleteFromWatchList=n.deleteFromWatchList.bind(Object(_.a)(Object(_.a)(n))),n.moveToLocalStorage=n.moveToLocalStorage.bind(Object(_.a)(Object(_.a)(n))),n.addToWatchList=n.addToWatchList.bind(Object(_.a)(Object(_.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"deleteFromWatchList",value:function(){this.setState({inWatchList:!1})}},{key:"addToWatchList",value:function(){this.setState({inWatchList:!0})}},{key:"render",value:function(){return this.state.inWatchList?o.a.createElement(P,{onClick:this.deleteFromWatchList},"Delete from watchlist"):o.a.createElement(P,{onClick:this.addToWatchList},"Add to watch list")}}]),t}(o.a.Component),W=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getAPIRecomendations()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h3",null,"Recomendations:"),this.props.recomendations.map(function(e){return e.original_title}).join(", "))}}]),t}(o.a.Component),C=Object(h.b)(function(e){return{recomendations:e.recomendations}},function(e,t){return{getAPIRecomendations:function(){console.log("here recomendations",t),e(w(t.id))}}})(W),N=n(46);function G(){var e=Object(D.a)(["\n  font-style: italic;\n  display: flex;\n  & h3,\n  & p {\n    margin: 0;\n  }\n  & div,\n  & button {\n    margin: 20px 0 30px 20px;\n  }\n  & button {\n    font-size: 18px;\n  }\n"]);return G=function(){return e},e}function R(){var e=Object(D.a)(["\n  margin-top: 0;\n  border-bottom: 2px solid lightblue;\n  color: darkblue;\n  & a {\n    font-size: 12px;\n    margin-left: 5px;\n  }\n"]);return R=function(){return e},e}function U(){var e=Object(D.a)(["\n  border: 2px solid lightblue;\n  border-radius: 10px;\n  padding: 20px;\n  max-width: 1100px;\n  margin: 50px auto;\n  font-family: 'Inconsolata', monospace;\n"]);return U=function(){return e},e}var J=I.a.div(U()),z=I.a.h1(R()),F=I.a.div(G()),V=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getMovieDetails()}},{key:"render",value:function(){return 0===Object.getOwnPropertyNames(this.props.movieDetails).length?o.a.createElement("h1",null,"Loading..."):o.a.createElement(J,null,o.a.createElement(z,null,this.props.movieDetails.title,o.a.createElement(N.a,{to:"/"},"(main page)")),o.a.createElement(F,null,o.a.createElement("aside",null,o.a.createElement("img",{src:"https://image.tmdb.org/t/p/w300/".concat(this.props.movieDetails.poster_path),alt:"".concat(this.props.movieDetails.title," poster")})),o.a.createElement("content",null,o.a.createElement("div",null,o.a.createElement("h3",null,"Overview:"),o.a.createElement("p",null,this.props.movieDetails.overview)),o.a.createElement("div",null,o.a.createElement("h3",null,"Genre:"),o.a.createElement("p",null,this.props.movieDetails.genres.map(function(e){return e.name}).join(", "))),o.a.createElement(C,{id:this.props.movieDetails.id}),o.a.createElement(T,{id:this.props.movieDetails.id,title:this.props.movieDetails.title}))))}}]),t}(o.a.Component),B=Object(h.b)(function(e){return{movieDetails:e.movieDetails}},function(e,t){return{getMovieDetails:function(){e(x(t.id))}}})(V);function X(){var e=Object(D.a)(["\n  color: darkblue;\n  margin: 10px auto;\n  display: flex;\n  justify-content: space-between;\n"]);return X=function(){return e},e}function Y(){var e=Object(D.a)(["\n  padding-left: 20px;\n  padding-right: 20px;\n  border-radius: 5px;\n  border: 2px lightblue solid;\n  margin: 0 auto;\n  max-width: 22%;\n  & h2 {\n    color: darkblue;\n    & a {\n      font-size: 12px;\n      margin-left: 5px;\n    }\n  }\n"]);return Y=function(){return e},e}var H=I.a.div(Y()),q=I.a.li(X()),K=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={watchList:{}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("watchlist"));this.setState({watchList:e}),console.log(this.state.watchList)}},{key:"render",value:function(){var e=this;return"{}"==JSON.stringify(this.state.watchList)?o.a.createElement(H,null,o.a.createElement("h2",null,"Watch list is empty",o.a.createElement(N.a,{to:"/"},"(main page)"))):o.a.createElement(H,null,o.a.createElement("h2",null,"Watch list",o.a.createElement(N.a,{to:"/"},"(main page)")),o.a.createElement("ul",null,Object.keys(this.state.watchList).map(function(t){return o.a.createElement(q,{key:t},e.state.watchList[t]," ",o.a.createElement(T,{id:t,title:e.state.watchList.id})," ")})))}}]),t}(o.a.Component),Q=(n(42),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={intervalId:0},e}return Object(p.a)(t,e),Object(l.a)(t,[{key:"scrollStep",value:function(){0===window.pageYOffset&&clearInterval(this.state.intervalId),window.scroll(0,window.pageYOffset-this.props.scrollStepInPx)}},{key:"scrollToTop",value:function(){var e=setInterval(this.scrollStep.bind(this),this.props.delayInMs);this.setState({intervalId:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("button",{title:"Back to top",className:"scroll",onClick:function(){e.scrollToTop()}},o.a.createElement("span",{className:"arrow-up"},"^"))}}]),t}(o.a.Component));function Z(){var e=Object(D.a)(["\n  color: darkblue;\n  &:visited {\n    color: blue;\n  }\n  text-decoration: none;\n"]);return Z=function(){return e},e}function $(){var e=Object(D.a)(["\n  &:before {\n    content: 'Genre: ';\n    font-weight: bold;\n    color: darkblue;\n  }\n  margin: 30px auto;\n"]);return $=function(){return e},e}function ee(){var e=Object(D.a)(["\n  border: 2px solid lightblue;\n  float: left;\n  margin-right: 20px;\n"]);return ee=function(){return e},e}function te(){var e=Object(D.a)(["\n  font-family: 'Inconsolata', monospace;\n  width: 30%;\n  margin: 0 5px 20px 5px;\n  border: 2px solid lightblue;\n  border-radius: 4px;\n  text-align: center;\n  font-style: italic;\n"]);return te=function(){return e},e}var ne=I.a.div(te()),ae=I.a.img(ee()),oe=I.a.div($()),re=I.a.h2(Z()),ie=function(e){var t=e.movie,n=t.id,a=t.title,r=t.genre_ids,i="https://image.tmdb.org/t/p/w154/".concat(e.movie.poster_path);return o.a.createElement(ne,{className:"movie-card"},o.a.createElement(ae,{src:i,alt:a}),o.a.createElement(N.a,{to:"/movie/".concat(n),style:{textDecoration:"none"}},o.a.createElement(re,null,a)),o.a.createElement(oe,null,e.allGenres.filter(function(e){return r.includes(e.id)}).map(function(e){return e.name}).join(", ")),o.a.createElement(T,{id:n,title:a}))},ce=n(30),le=n.n(ce);function se(){var e=Object(D.a)(["\n  & h1 {\n    font-size: 50px;\n    color: darkblue;\n  }\n  font-family: 'Inconsolata', monospace;\n  margin: 20px auto;\n  max-width: 1200px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return se=function(){return e},e}function ue(){var e=Object(D.a)(["\n  max-width: 1300px;\n  margin: 0 auto;\n  display: flex;\n  flex-wrap: wrap;\n"]);return ue=function(){return e},e}var pe=I.a.div(ue()),he=I.a.header(se()),de=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).fetchMorePopularMovies=n.fetchMorePopularMovies.bind(Object(_.a)(Object(_.a)(n))),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"fetchMorePopularMovies",value:function(){this.props.getAPIPopularMovies(this.props.page)}},{key:"componentDidMount",value:function(){this.props.allGenres.length||(this.fetchMorePopularMovies(),this.props.getAPIGenres())}},{key:"render",value:function(){var e=this;return this.props.allGenres.length?o.a.createElement("div",{className:"content"},o.a.createElement(he,null,o.a.createElement(N.a,{to:"/watchlist"},"Watch list"),o.a.createElement("h1",null,"Popular Movies"),o.a.createElement("div",null,o.a.createElement("span",null,"Search:"),o.a.createElement("input",{type:"text",placeholder:"type title...",value:this.props.searchString,onChange:this.props.handleSearch}))),o.a.createElement(Q,{scrollStepInPx:"50",delayInMs:"16.66"}),o.a.createElement(le.a,{dataLength:this.props.popularMovies.length,next:this.fetchMorePopularMovies,hasMore:!0},o.a.createElement(pe,null,this.props.popularMovies.filter(function(t){return t.title.toUpperCase().includes(e.props.searchString.toUpperCase())}).map(function(t){return o.a.createElement(ie,{key:t.id,allGenres:e.props.allGenres,movie:t})})))):o.a.createElement("h2",null,"Loading...")}}]),t}(o.a.Component),me=Object(h.b)(function(e){return console.log("movies!!!",e.popularMovies),{searchString:e.searchString,allGenres:e.allGenres,popularMovies:e.popularMovies,page:e.page}},function(e){return{handleSearch:function(t){var n;e((n=t.target.value,{type:v,payload:n}))},getAPIGenres:function(){e(j())},getAPIPopularMovies:function(t){e(y(t))}}})(de),fe=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(h.a,{store:M},o.a.createElement("div",null,o.a.createElement(m.a,{exact:!0,path:"/",render:function(){return o.a.createElement(me,null)}}),o.a.createElement(m.a,{exact:!0,path:"/movie/:id",render:function(e){return o.a.createElement(B,{id:e.match.params.id})}}),o.a.createElement(m.a,{exact:!0,path:"/watchlist",component:K}))))}}]),t}(o.a.Component);i.a.render(o.a.createElement(fe,null),document.getElementById("root"))}},[[33,2,1]]]);
//# sourceMappingURL=main.b4c69f29.chunk.js.map